<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Cordova Presentation API Plugin : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Cordova Presentation API Plugin</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/fraunhoferfokus/cordova-plugin-presentation">View on GitHub</a>

          <h1 id="project_title">Cordova Presentation API Plugin</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/fraunhoferfokus/cordova-plugin-presentation/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/fraunhoferfokus/cordova-plugin-presentation/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="create-native-multiscreen-apps-in-minutes" class="anchor" href="#create-native-multiscreen-apps-in-minutes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create native multiscreen apps in minutes.</h1>

<hr>

<p><strong>// Quick Info</strong><br>
<strong>//</strong> <em>Implementation of the Presentation API as Apache Cordova Plugin</em><br>
<strong>//</strong> Based on spec: <a href="http://www.w3.org/2014/secondscreen/presentation-api/20140721/">W3C Presentation API</a>, <a href="http://w3c.github.io/presentation-api/">latest draft version</a><br>
<strong>//</strong> Discussed in groups: <a href="http://www.w3.org/community/webscreens/">W3C Second Screen CG</a>, <a href="http://www.w3.org/2014/secondscreen/">W3C Second Screen WG</a><br>
<strong>//</strong> Available in framework: <a href="http://www.fokus.fraunhofer.de/go/famium">FAMIUM Multiscreen</a><br>
<strong>//</strong> <em>FAMIUM is a prototype implementation of upcoming Web and media technologies</em>   </p>

<hr>

<h2>
<a id="for-the-impatient" class="anchor" href="#for-the-impatient" aria-hidden="true"><span class="octicon octicon-link"></span></a>For the impatient</h2>

<p>Please check out our simple <a href="http://fraunhoferfokus.github.io/cordova-plugin-presentation-helloapp/">HelloApp</a> 
to get a first impression on multiscreen app development using this plugin. With the instructions given there the sample app is built in less than a minute!</p>

<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p>This document describes the Apache Cordova implementation of the <a href="http://www.w3.org/2014/secondscreen/presentation-api/20140721/">Presentation API</a> introduced by the <a href="http://www.w3.org/community/webscreens/">W3C Second Screen Presentation Community Group</a> and which is discussed now within the <a href="http://www.w3.org/2014/secondscreen/">Second Screen Presentation Working Group</a>. The implementation is an open-sourced part of <a href="http://www.fokus.fraunhofer.de/go/famium">FAMIUM</a>, an end-to-end prototype implementation for early technology evaluation and interoperability testing introduced by Fraunhofer FOKUSâ€™ Competence Center <a href="http://www.fokus.fraunhofer.de/go/fame">Future Applications and Media</a> (<a href="http://www.fokus.fraunhofer.de/go/fame">FAME</a>). </p>

<p>Using this plugin, Presentation API powered apps can be built today, (hopefully not so) long before the Presentation API has landed in our Web browsers. </p>

<p>Notice: Our Implementation supports <a href="http://www.w3.org/2014/secondscreen/presentation-api/20140721/">this version of the Presentation API</a>. Please refer  also to the <a href="http://w3c.github.io/presentation-api">latest work-in-progress version of the API</a> which we are currently working on.</p>

<p>The main purpose of the <a href="http://www.w3.org/2014/secondscreen/presentation-api/20140721/">Presentation API</a> is to enable web pages to access external presentation-type displays and use them for presenting web content. It aims to make secondary displays such as a projector or a connected TV available to the web and takes into account displays that are attached using wired (HDMI, DVI or similar) and wireless technologies (MiraCast, Chromecast, DLNA, AirPlay or similar). At its core, the specification of the Presentation API enables an exchange of messages between a requesting page and a presentation page shown in the secondary display. How those messages are transmitted is left to the UA in order to allow for use of display devices that can be attached in a wide variety of ways. For example, when a display device is attached using HDMI or MiraCast, the UA on the requesting device can render the requested presentation page in that same UA, but instead of displaying in a window on that same device, it can use whatever means the operating system provides for using those external displays. In that case, both the requesting page and the presentation page run on the requesting device and the operating system is used to route the presentation display output to the other display device. The second display device doesn't need to know anything about this spec or that the content involves HTML5. Alternately, some types of external displays may be able to render HTML5 themselves and may have defined their own way to send messages to that content. In that case, the UA on the requesting device would not need to render the presentation page itself. Instead, the UA could act as a proxy translating the request to show a page and the messages into the form understood by the display device. </p>

<p>Since the <a href="http://www.w3.org/2014/secondscreen/presentation-api/20140721/">Presentation API</a> abstracts from all the technologies described above and specifies only the interfaces, there are different ways to implement it depending from the target platform of the controlling device and the presenting display as well as from the technologies and protocols used behind. </p>

<p><img src="docs/schema.png" alt="Schema"></p>

<p>This Cordova Presentation API Plugin implementation supports currently the following platforms and technologies, utilizing the single UA approach and streaming the contents of a second WebView to the external display:</p>

<ul>
<li>iOS devices connecting via AV cable or AirPlay mirroring, utilizing <a href="https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/WindowAndScreenGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012555-CH1-SW1">Multiple Display Programming Guide for iOS</a>
</li>
<li>Android devices connecting via AV cable or MiraCast, utilizing <a href="https://developer.android.com/reference/android/app/Presentation.html">Android Presentation API</a>
</li>
</ul>

<p>Further implementations of the Presentation API (non Cordova) are available at <a href="https://gitlab.fokus.fraunhofer.de/famium/famium-webscreens/wikis/home">FAMIUM Webscreens</a>.</p>

<h2>
<a id="plugin-api-documentation" class="anchor" href="#plugin-api-documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plugin API documentation</h2>

<p>The full plugin API documentation of the implemented Presentation API is available in the <a href="https://github.com/fraunhoferfokus/cordova-plugin-presentation/blob/master/doc/index.md">doc</a> folder.</p>

<h2>
<a id="from-zero-to-hero" class="anchor" href="#from-zero-to-hero" aria-hidden="true"><span class="octicon octicon-link"></span></a>From zero to hero</h2>

<h3>
<a id="step-by-step-guide-to-develop-multiscreen-apps-using-the-cordova-presentation-api-plugin" class="anchor" href="#step-by-step-guide-to-develop-multiscreen-apps-using-the-cordova-presentation-api-plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step by step guide to develop multiscreen apps using the Cordova Presentation API Plugin</h3>

<p>Prerequisites: It is assumed that you have your development system set up. We used </p>

<ul>
<li><a href="http://cordova.apache.org/docs/en/4.0.0/">Cordova 4.0.0</a></li>
<li><a href="https://developer.android.com/about/versions/android-4.4.html">Android SDK, API level 19</a></li>
<li><a href="https://developer.apple.com/xcode/downloads/">Xcode 6.0.1 with iOS 8.0 SDK</a></li>
</ul>

<h4>
<a id="step-1-preparing-the-app-project" class="anchor" href="#step-1-preparing-the-app-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Preparing the app project</h4>

<p>It starts with the creation of the project folder and obligatory Cordova files. 
This is easily with the <code>cordova</code>command if you have installed Apache Cordova successfully.
Let's name our first app "MyFirstPresentaionApp" and execute in a shell in $HOME/devel folder:</p>

<pre><code>$ cordova create mypresentation com.example.mypresentation MyFirstPresentaionApp
Creating a new cordova project with name "HelloCordova" and id "MyFirstPresentaionApp" at location "$HOME/devel/mypresentation"
</code></pre>

<p>Now we will change into the freshly created project folder and add the platforms we would like to build the app for:</p>

<pre><code>$ cd mypresentation
$ cordova platform add ios
Creating ios project...
$ cordova platform add android
Creating android project...
Creating Cordova project for the Android platform:
    Path: platforms/android
    Package: com.example.mypresentation
    Name: MyFirstPresentaionApp
    Android target: android-19
Copying template files...
Project successfully created.
</code></pre>

<p>Finally, we add the Cordova Presentation API Plugin by executing:</p>

<pre><code>$ cordova plugin add de.fhg.fokus.famium.presentation
Fetching plugin "de.fhg.fokus.famium.presentation" via plugin registry
npm http GET http://registry.cordova.io/de.fhg.fokus.famium.presentation
npm http 304 http://registry.cordova.io/de.fhg.fokus.famium.presentation
Installing "de.fhg.fokus.famium.presentation" for android
Installing "de.fhg.fokus.famium.presentation" for ios
</code></pre>

<p>Alternatively to the last command, you may wish to use the cutting edge version of the plugin or your own version. In this case you can specify the repo url:</p>

<pre><code>$ cordova plugin add https://github.com/fraunhoferfokus/cordova-plugin-presentation.git
Fetching plugin "https://github.com/fraunhoferfokus/cordova-plugin-presentation.git" via git clone
Installing "de.fhg.fokus.famium.presentation" for android
Installing "de.fhg.fokus.famium.presentation" for ios
</code></pre>

<p>Now we move on to the interesting part, the app development.</p>

<h4>
<a id="step-2-implementing-the-multiscreen-app" class="anchor" href="#step-2-implementing-the-multiscreen-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Implementing the multiscreen app</h4>

<p>This is the most crucial step, since it's about realizing your app idea. At least, you don't have to care about implementing the bits and pieces to connect and handle external displays. The plugin will do the work for you, if only your code implements agains the <a href="http://www.w3.org/2014/secondscreen/presentation-api/20140721/">Presentation API</a>.</p>

<p>So let's implement the following very simple app idea: The controlling page connects to an external screen and provides a button. If the button is clicked then the current date and time will be posted to the presenting page and displayed on the big screen.</p>

<p>For this purpose, we purge the contents of the <code>$HOME/devel/mypresentation/www</code> folder and create two new files:</p>

<ul>
<li>index.html that will be our controlling page </li>
<li>display.html that will be our presenting page</li>
</ul>

<p>The contents of the index.html could look like:</p>

<pre><code>&lt;!-- index.html --&gt;
&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;MyFirstPresentaionApp&lt;/title&gt;
   &lt;script type="text/javascript" src="cordova.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

   &lt;button&gt;Send Date and Time to Big Screen&lt;/button&gt;

   &lt;script type="text/javascript"&gt;
      var onDeviceReady = function(){
         var session,
             button = document.querySelector('button');
         button.disabled = true;
         button.onclick = function(){
            if (session &amp;&amp; session.state == "connected")
               session.postMessage(new Date().toString());
         }
         navigator.presentation.onavailablechange = function(screenEvent){
            if(screenEvent.available){
               session = navigator.presentation.requestSession("display.html");
               session.onmessage = function(msg){ /*we don't care in this app*/ };
               session.onstatechange = function(){
                  button.disabled = session.state != "connected";
               }
            }
         };
      };
      document.addEventListener('deviceready', onDeviceReady, false);
   &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The contents of the display.html could look like:</p>

<pre><code>&lt;!-- display.html --&gt;
&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;MyFirstPresentaionApp | Display&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h1&gt;Waiting for a Date and Time update...&lt;/h1&gt;
   &lt;div&gt;&lt;/div&gt;

   &lt;script type="text/javascript"&gt;
      var onDeviceReady = function(){
         var session,
             div = document.querySelector('div');
         navigator.presentation.onpresent = function(presentEvent){
            session = presentEvent.session;
            session.onmessage = function(msg){
               div.innerText = msg;
            };
            session.onstatechange = function(){
               div.innerText = session.state;
            }
         };
      };
      document.addEventListener('deviceready', onDeviceReady, false);
   &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Pitfall: Do not include the <code>cordova.js</code> into the presenting page, since only the controlling page is a Cordova WebView. </p>

<h4>
<a id="step-3-building-and-running" class="anchor" href="#step-3-building-and-running" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3: Building and running</h4>

<p>Having the hard part done, now we finalize the app by building and running it. This is done again very easily using the <code>cordova</code>command. To build:</p>

<pre><code>$ cordova build ios
//lot of output (hopefully;) ending with  
** BUILD SUCCEEDED **
$ cordova build android
//lot of output (hopefully;) ending with  
BUILD SUCCESSFUL
Total time: 20 seconds
Built the following apk(s):
    $HOME/devel/mypresentation/platforms/android/ant-build/CordovaApp-debug.apk
</code></pre>

<p>To run the app just execute for iOS:</p>

<pre><code>$ cordova run ios
</code></pre>

<p>In iOS case the iPhone Simulator will be launched and you can activate the external display by choosing e.g. <code>Hardware</code> -&gt; <code>External Display</code> -&gt; <code>1024 x 768</code>. Alternatively, you may want to open the Xcode project and tweak your app or deploy it to a real device from there. In this case, you will find the project at <code>$HOME/devel/mypresentation/platforms/ios/MyFirstPresentaionApp.xcodeproj</code></p>

<p>To run for Android:</p>

<pre><code>$ cordova run android
</code></pre>

<p>The run command for Android requires you to have either a (MiraCast capable) Android device attached to your computer and its accessible by adb (use <code>$ adb devices</code> to check) or you have created an emulator (<code>$ android avd</code>) and simulating an external screen using the appropriate setting in the developer settings.</p>

<p>Congratulations, you have managed to build an native app using the Cordova Presentation API Plugin.</p>

<h2>
<a id="contribution" class="anchor" href="#contribution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contribution</h2>

<p>We are grateful for any valuable contribution, like <a href="https://github.com/fraunhoferfokus/cordova-plugin-presentation/issues">issue reports</a>, <a href="https://github.com/fraunhoferfokus/cordova-plugin-presentation/tree/master/doc">documentation localizations</a>, <a href="https://github.com/fraunhoferfokus/cordova-plugin-presentation/tree/master/tests">tests</a> or <a href="https://github.com/fraunhoferfokus/cordova-plugin-presentation/pulls">pull requests</a>.</p>

<p>Moreover, we would love to hear which exciting apps you have created using the Presentation API.</p>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h1>

<p>Copyright 2014 Fraunhofer FOKUS</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>

<h3>
<a id="contact" class="anchor" href="#contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact</h3>

<p><a href="http://www.fokus.fraunhofer.de/fame">Fraunhofer FOKUS - Competence Center FAME // Future Applications and Media</a></p>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Cordova Presentation API Plugin maintained by <a href="https://github.com/fraunhoferfokus">fraunhoferfokus</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
